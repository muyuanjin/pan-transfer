# CHAOSPACE 转存助手 Chrome 插件

该扩展用于替代 `潮片链接提取.py` 脚本，在浏览 CHAOSPACE 站点（`chaospace.xyz`、`chaospace.cc` 等）时，直接从页面上收集百度网盘资源链接并批量转存到个人百度网盘目录。

## 功能概览

- 自动解析剧集页面中的资源表格，识别所有指向 `links/*.html` 的资源。
- 访问对应的详情页获取百度网盘分享链接与提取码。
- 调用百度网盘 Web API（基于当前浏览器登录态）完成转存，可在扩展中指定目标目录。
- 支持为每个资源自动/手动设置子目录，避免文件混淆。
- 批量执行时展示成功、跳过、失败等结果统计及提示信息。

## 安装步骤

1. 确保 Chrome / Edge 已登录百度网盘账号，并可以正常访问 `pan.baidu.com`。
2. 在浏览器地址栏输入 `chrome://extensions/`（或 `edge://extensions/`），右上角开启「开发者模式」。
3. 点击「加载已解压的扩展程序」，选择仓库内的 `chaospace-extension` 文件夹。
4. 扩展安装后，将在工具栏显示 “CHAOSPACE 转存助手”。

## 使用方法

1. 打开 CHAOSPACE 的剧集资源页（例如 `https://www.chaospace.cc/seasons/xxxxxx.html`）。
2. 点击浏览器工具栏中的扩展图标。
3. 在弹窗中：
   - 确认「百度网盘目录」输入框，默认会记住上一次目录。
   - 需要为每条资源创建独立子目录时，勾选「每个资源使用标题创建子目录」，并按需修改子目录名称。
   - 使用顶部按钮快速全选 / 全不选资源条目。
4. 点击「转存选中资源」，扩展会依次请求资源详情、验证提取码、创建目录并转存。
5. 执行完毕后将在「执行结果」区域显示每条资源的状态与提示。

## 注意事项

- 扩展依赖浏览器当前的百度网盘登录态，会直接复用现有 Cookie，无需额外填写账号信息。
- 若网页上没有解析到资源链接，弹窗内会给出提示；请确认当前页面确实是 CHAOSPACE 的资源页。
- 如果百度网盘返回错误（如提取码错误、容量不足等），结果列表会展示具体错误描述；可根据提示调整后重试。
- 目录创建会自动处理多级路径；若遇到无权限或非法字符的情况，请在弹窗中调整目录名称。
- 转存时会给 `pan.baidu.com` 写入必要的 `BDCLND` Cookie，因此扩展需要 `cookies` 权限。

## 目录结构

```
chaospace-extension/
├── background.js     # Service Worker，负责抓取链接与调用百度网盘接口
├── contentScript.js  # 注入到 CHAOSPACE 页面，提取资源基础信息
├── manifest.json     # Chrome 扩展清单
├── popup.css         # 弹窗样式
├── popup.html        # 弹窗界面
├── popup.js          # 弹窗逻辑（选择资源、触发转存）
└── README.md         # 使用说明（本文）
```

安装后即可直接在浏览器中批量整理 CHAOSPACE 资源，无需再运行 Python 脚本。欢迎根据自身需求进一步扩展界面或功能。
